# =================
# REQUIRED VARIABLES
# =================

# =================
# CONFIGURACIÓN DE SEGURIDAD
# =================

# JWT Secret - REQUERIDO EN PRODUCCIÓN (mínimo 32 chars aleatorios)
JWT_SECRET=<SET_A_64_CHAR_RANDOM_SECRET>

# JWT Token expiration in minutes (default: 1440 = 24 hours)
JWT_EXPIRE_MINUTES=1440

# Clave de encriptación Fernet - Se genera automáticamente si no existe
# FERNET_KEY=

# =================
# CONFIGURACIÓN DE BASE DE DATOS
# =================

# Para desarrollo local (SQLite)
# DATABASE_URL=sqlite:///chatbot_context.db

# Para producción (PostgreSQL)
# DATABASE_URL=postgresql://usuario:password@localhost:5432/chatbot_db

# =================
# CONFIGURACIÓN DE APIs DE IA
# =================

# Google Gemini (Recomendado - 15 RPM gratuitas)
# GEMINI_API_KEY=tu_api_key_de_gemini
# GEMINI_MODEL=gemini-1.5-flash

# OpenAI (Potente pero de pago)
# OPENAI_API_KEY=tu_api_key_de_openai
# OPENAI_MODEL=gpt-4o-mini
# OPENAI_BASE_URL=https://api.openai.com/v1

# Anthropic Claude (Excelente para análisis)
# CLAUDE_API_KEY=tu_api_key_de_claude
# CLAUDE_MODEL=claude-3-haiku-20240307

# xAI Grok (Beta - Límites generosos)
# XAI_API_KEY=tu_api_key_de_xai
# XAI_MODEL=grok-beta
# XAI_BASE_URL=https://api.x.ai/v1

# LM Studio Local (Gratuito - Requiere instalación)
# LM_STUDIO_URL=http://127.0.0.1:1234/v1
# LM_STUDIO_MODEL=llama3.2:3b

# Ollama Local (Gratuito - Requiere instalación)
# OLLAMA_BASE_URL=http://localhost:11434
# OLLAMA_MODEL=llama3.2:3b

# =================
# CONFIGURACIÓN DEL SISTEMA
# =================

# Proveedor de IA principal (gemini, openai, claude, xai, ollama, lmstudio)
DEFAULT_LLM_PROVIDER=gemini

# Solo usar modelos gratuitos (true/false)
ENABLE_FREE_MODELS_FALLBACK=false

# Orden de fallback de APIs (separado por comas)
AI_FALLBACK_ORDER=gemini,xai,openai,claude,ollama,lmstudio

# Puerto del servidor
SERVER_PORT=8003

# Host del servidor (0.0.0.0 para producción, 127.0.0.1 para desarrollo)
SERVER_HOST=127.0.0.1

# Dominios permitidos para CORS (separados por comas)
# No usar '*' cuando allow_credentials=true
CORS_ORIGINS=http://localhost:8003,http://127.0.0.1:8003

# =================
# CONFIGURACIÓN DE USUARIO ADMINISTRADOR INICIAL
# =================

# Usuario administrador inicial - CAMBIAR DESPUÉS DEL PRIMER LOGIN
ADMIN_USERNAME=<SET_INITIAL_ADMIN_USER>
ADMIN_PASSWORD=<SET_INITIAL_ADMIN_PASSWORD>

# Usuario operador inicial
OPERATOR_USERNAME=<SET_INITIAL_OPERATOR_USER>
OPERATOR_PASSWORD=<SET_INITIAL_OPERATOR_PASSWORD>

# Redis password requerido cuando compose usa --requirepass
REDIS_PASSWORD=<SET_STRONG_REDIS_PASSWORD>


# =================
# OPTIONAL VARIABLES
# =================

# =================
# CONFIGURACIÓN DE WHATSAPP
# =================

# Modo de WhatsApp: web (Playwright), cloud (API oficial), both (ambos)
WHATSAPP_MODE=web

# WhatsApp Cloud API (Meta Business - solo si WHATSAPP_MODE=cloud o both)
WHATSAPP_CLOUD_TOKEN=
WHATSAPP_PHONE_ID=
WHATSAPP_VERIFY_TOKEN=
WHATSAPP_APP_SECRET=
WHATSAPP_BUSINESS_ACCOUNT_ID=

# WhatsApp Web (Playwright - solo si WHATSAPP_MODE=web o both)
# Mantener automator abierto después de conectar
KEEP_AUTOMATOR_OPEN=true

# Tiempo de espera para conexión WhatsApp (segundos)
WHATSAPP_TIMEOUT=60

# =================
# CONFIGURACIÓN DE LOGGING
# =================

# Nivel de logging (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# =================
# CONFIGURACIÓN DE AUDIO/TRANSCRIPCIÓN
# =================

# Habilitar transcripción de audio
AUDIO_TRANSCRIPTION_ENABLED=true

# Tamaño del modelo Whisper (tiny, base, small, medium, large)
WHISPER_MODEL_SIZE=base

# Dispositivo para Whisper (cpu, cuda)
WHISPER_DEVICE=cpu

# Límites de audio
MAX_AUDIO_FILE_SIZE_MB=10
MAX_AUDIO_DURATION_SECONDS=300

# =================
# CONFIGURACIÓN DE ALERTAS
# =================

# Habilitar sistema de alertas
ALERTS_ENABLED=true

# Webhook para notificaciones de alertas (opcional)
ALERT_WEBHOOK_URL=

# =================
# CONFIGURACIÓN DE AUDITORÍA
# =================

# Habilitar sistema de auditoría
AUDIT_ENABLED=true

# =================
# CONFIGURACIÓN DOCKER/POSTGRES
# =================

# PostgreSQL (para docker-compose)
POSTGRES_DB=chatbot
POSTGRES_USER=chatbot
POSTGRES_PASSWORD=changeme-secure-password

# Backups automáticos PostgreSQL (docker-compose.backup.yml)
BACKUP_SCHEDULE=@daily
BACKUP_KEEP_DAYS=7
BACKUP_KEEP_WEEKS=4
BACKUP_KEEP_MONTHS=6

# Archivo de logs
LOG_FILE=logs/app.log

# =================
# CONFIGURACIÓN DE REDIS (OPCIONAL - PARA CACHÉ)
# =================

# Redis URL para caché (opcional)
# REDIS_URL=redis://localhost:6379/0

# =================
# RATE LIMITING HTTP
# =================

RATE_LIMIT_ENABLED=true
RATE_LIMIT_REDIS_ENABLED=true
# RATE_LIMIT_REDIS_URL=redis://localhost:6379/0
RATE_LIMIT_PREFIX=ratelimit:http
RATE_LIMIT_WINDOW_SECONDS=60
RATE_LIMIT_API_REQUESTS=120
RATE_LIMIT_AUTH_WINDOW_SECONDS=300
RATE_LIMIT_AUTH_REQUESTS=10
RATE_LIMIT_SYSTEM_WINDOW_SECONDS=60
RATE_LIMIT_SYSTEM_REQUESTS=30

# =================
# ROTACIÓN DE CLAVE FERNET
# =================

FERNET_KEY_ROTATION_DAYS=90


# =================
# DEBUG / LOCAL DEV
# =================

# DEBUG=true
# AUTO_MIGRATE=true

# =================
# CONFIGURACIÓN DE NEGOCIO
# =================

# Tipo de negocio por defecto
BUSINESS_TYPE=general

# Contexto empresarial por defecto
BUSINESS_CONTEXT=Soy un asistente de IA para empresas. Puedo ayudar con consultas generales y brindar información sobre productos y servicios.
