<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="common.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.1.6/purify.min.js" integrity="sha512-jB0TkTBeQC9ZSkBqDhdmfTv1qdfbWpGE72yJ/01Srq6hEzZIz2xkz1e57p9ai7IeHMwEG7HpzG6NdptChif5Pg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="/ui/auth.js"></script>
    <script src="/ui/api.js"></script>
    <script src="/ui/sanitize.js"></script>

    <title>游눫 Chat de Prueba - AI Chatbot</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer">
    <link rel="stylesheet" href="/ui/chat.css">
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h3><i class="fas fa-comments"></i> Chat de Prueba</h3>
                <div class="status-indicator status-offline" id="connectionStatus"></div>
            </div>
            
            <div class="sidebar-content">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="messageCount">0</div>
                        <div class="stat-label">Mensajes</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="responseTime">0ms</div>
                        <div class="stat-label">Respuesta</div>
                    </div>
                </div>

                <div class="controls">
                    <h4 class="controls-title">Controles</h4>
                    
                    <button class="control-btn primary" id="connectBtn">
                        <i class="fas fa-plug"></i> Conectar
                    </button>
                    
                    <button class="control-btn secondary" id="clearBtn">
                        <i class="fas fa-trash"></i> Limpiar Chat
                    </button>
                    
                    <button class="control-btn secondary" id="sampleBtn">
                        <i class="fas fa-paper-plane"></i> Mensaje de Prueba
                    </button>
                    
                    <button class="control-btn danger" id="disconnectBtn">
                        <i class="fas fa-times"></i> Desconectar
                    </button>
                </div>

                <div class="status-details">
                    <strong>Estado:</strong> <span id="statusText">Desconectado</span><br>
                    <strong>Sesi칩n:</strong> <span id="sessionId">-</span><br>
                    <strong>칔ltima actividad:</strong> <span id="lastActivity">-</span>
                </div>
            </div>
        </div>

        <!-- Chat Principal -->
        <div class="chat-main">
            <div class="chat-header">
                <div>
                    <h2><i class="fas fa-robot"></i> Asistente Virtual</h2>
                    <p>Prueba tu configuraci칩n de negocio en tiempo real</p>
                </div>
                <div class="chat-header-right">
                    <small>Configuraci칩n: <span id="businessName">Cargando...</span></small>
                </div>
            </div>

            <div class="chat-messages" id="chatMessages" aria-live="polite" aria-relevant="additions text">
                <!-- Los mensajes aparecer치n aqu칤 din치micamente -->
            </div>

            <div class="chat-input-area">
                <input 
                    type="text" 
                    class="chat-input" 
                    id="messageInput" 
                    placeholder="Escribe tu mensaje..." 
                    disabled
                >
                <button class="send-btn" id="sendBtn" disabled>
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- requireAuth('/ui/login.html') -->
    <!-- window.Api apiJson apiRequest -->
    <script src="/ui/chat.js" defer></script>
</body>
</html>
